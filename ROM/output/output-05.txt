.startrom
.startcode
     C000   78         SEI
     C001   D8         CLD
     C002   A2 FF      LDX #&FF
     C004   9A         TXS
     C005   A9 FF      LDA #&FF
     C007   8D 02 A0   STA &A002
     C00A   A9 E0      LDA #&E0
     C00C   8D 03 A0   STA &A003
     C00F   A9 00      LDA #&00
     C011   8D 01 B0   STA &B001
     C014   8D 10 02   STA &0210
     C017   8D FF 04   STA &04FF
     C01A   8D FF 03   STA &03FF
     C01D   A9 9E      LDA #&9E
     C01F   8D 03 B0   STA &B003
     C022   A9 09      LDA #&09
     C024   8D 02 B0   STA &B002
     C027   A9 38      LDA #&38
     C029   20 3E C1   JSR &C13E
     C02C   A9 0C      LDA #&0C
     C02E   20 3E C1   JSR &C13E
     C031   A9 01      LDA #&01
     C033   20 3E C1   JSR &C13E
.main
     C036   A9 0A      LDA #&0A
     C038   20 EE C0   JSR &C0EE
     C03B   20 EE C0   JSR &C0EE
     C03E   A9 00      LDA #&00
     C040   85 70      STA &70
     C042   A9 C4      LDA #&C4
     C044   85 71      STA &71
     C046   20 FE C0   JSR &C0FE
     C049   20 F5 C0   JSR &C0F5
     C04C   A9 0C      LDA #&0C
     C04E   85 70      STA &70
     C050   A9 C4      LDA #&C4
     C052   85 71      STA &71
     C054   20 FE C0   JSR &C0FE
     C057   20 0F C1   JSR &C10F
     C05A   A9 00      LDA #&00
     C05C   85 70      STA &70
     C05E   A9 C4      LDA #&C4
     C060   85 71      STA &71
     C062   20 6C C1   JSR &C16C
     C065   A2 00      LDX #&00
     C067   A0 01      LDY #&01
     C069   20 7A C1   JSR &C17A
     C06C   A9 0C      LDA #&0C
     C06E   85 70      STA &70
     C070   A9 C4      LDA #&C4
     C072   85 71      STA &71
     C074   20 6C C1   JSR &C16C
     C077   58         CLI
.mainloop
     C078   AD 10 02   LDA &0210
     C07B   29 02      AND #&02
     C07D   D0 0A      BNE &C089
     C07F   AE FF 04   LDX &04FF
     C082   E0 F0      CPX #&F0
     C084   B0 03      BCS &C089
     C086   4C 78 C0   JMP &C078
.process_rx
     C089   20 A1 C0   JSR &C0A1
     C08C   4C 78 C0   JMP &C078
.acia_wait_send_clr
     C08F   48         PHA
.acia_wait_send_loop
     C090   AD 01 B0   LDA &B001
     C093   29 10      AND #&10
     C095   F0 F9      BEQ &C090
     C097   68         PLA
     C098   60         RTS
.acia_wait_byte_recvd
     C099   AD 01 B0   LDA &B001
     C09C   29 08      AND #&08
     C09E   F0 F9      BEQ &C099
     C0A0   60         RTS
.serial_print_rx_buf
     C0A1   A9 01      LDA #&01
     C0A3   20 3E C1   JSR &C13E
     C0A6   20 0F C1   JSR &C10F
     C0A9   AD 10 02   LDA &0210
     C0AC   29 F0      AND #&F0
     C0AE   8D 10 02   STA &0210
     C0B1   A2 00      LDX #&00
.get_rx_char
     C0B3   BD 00 04   LDA &0400,X
     C0B6   F0 0D      BEQ &C0C5
     C0B8   20 56 C1   JSR &C156
     C0BB   E8         INX
     C0BC   EC FF 04   CPX &04FF
     C0BF   F0 04      BEQ &C0C5
     C0C1   E0 FF      CPX #&FF
     C0C3   D0 EE      BNE &C0B3
.end_print_rx
     C0C5   A2 00      LDX #&00
     C0C7   8E FF 04   STX &04FF
     C0CA   8E 00 04   STX &0400
     C0CD   60         RTS
.serial_send_buffer
     C0CE   A2 00      LDX #&00
.serial_send_next_char
     C0D0   BD 00 03   LDA &0300,X
     C0D3   F0 13      BEQ &C0E8
     C0D5   20 8F C0   JSR &C08F
     C0D8   8D 00 B0   STA &B000
     C0DB   E8         INX
     C0DC   EC FF 03   CPX &03FF
     C0DF   F0 07      BEQ &C0E8
     C0E1   E0 F0      CPX #&F0
     C0E3   F0 03      BEQ &C0E8
     C0E5   4C D0 C0   JMP &C0D0
.serial_send_buf_end
     C0E8   A9 00      LDA #&00
     C0EA   8D FF 03   STA &03FF
     C0ED   60         RTS
.serial_send_char
     C0EE   20 8F C0   JSR &C08F
     C0F1   8D 00 B0   STA &B000
     C0F4   60         RTS
.serial_send_lineend
     C0F5   A9 0A      LDA #&0A
     C0F7   20 8F C0   JSR &C08F
     C0FA   8D 00 B0   STA &B000
     C0FD   60         RTS
.serial_send_msg
     C0FE   A0 00      LDY #&00
.serial_send_msg_chr
     C100   B1 70      LDA (&70),Y
     C102   F0 0A      BEQ &C10E
     C104   20 8F C0   JSR &C08F
     C107   8D 00 B0   STA &B000
     C10A   C8         INY
     C10B   4C 00 C1   JMP &C100
.serial_send_msg_end
     C10E   60         RTS
.serial_send_prompt
     C10F   A9 14      LDA #&14
     C111   85 70      STA &70
     C113   A9 C4      LDA #&C4
     C115   85 71      STA &71
     C117   20 FE C0   JSR &C0FE
     C11A   60         RTS
.lcd_wait
     C11B   48         PHA
     C11C   A9 00      LDA #&00
     C11E   8D 02 A0   STA &A002
.lcd_busy
     C121   A9 40      LDA #&40
     C123   8D 01 A0   STA &A001
     C126   A9 C0      LDA #&C0
     C128   8D 01 A0   STA &A001
     C12B   AD 00 A0   LDA &A000
     C12E   29 80      AND #&80
     C130   D0 EF      BNE &C121
     C132   A9 40      LDA #&40
     C134   8D 01 A0   STA &A001
     C137   A9 FF      LDA #&FF
     C139   8D 02 A0   STA &A002
     C13C   68         PLA
     C13D   60         RTS
.lcd_cmd
     C13E   48         PHA
     C13F   20 1B C1   JSR &C11B
     C142   8D 00 A0   STA &A000
     C145   A9 00      LDA #&00
     C147   8D 01 A0   STA &A001
     C14A   A9 80      LDA #&80
     C14C   8D 01 A0   STA &A001
     C14F   A9 00      LDA #&00
     C151   8D 01 A0   STA &A001
     C154   68         PLA
     C155   60         RTS
.lcd_prt_chr
     C156   20 1B C1   JSR &C11B
     C159   8D 00 A0   STA &A000
     C15C   A9 20      LDA #&20
     C15E   8D 01 A0   STA &A001
     C161   A9 A0      LDA #&A0
     C163   8D 01 A0   STA &A001
     C166   A9 20      LDA #&20
     C168   8D 01 A0   STA &A001
     C16B   60         RTS
.lcd_prt_msg
     C16C   A0 00      LDY #&00
.lcd_prt_msg_chr
     C16E   B1 70      LDA (&70),Y
     C170   F0 07      BEQ &C179
     C172   20 56 C1   JSR &C156
     C175   C8         INY
     C176   4C 6E C1   JMP &C16E
.lcd_prt_msg_end
     C179   60         RTS
.lcd_set_cursor
     C17A   A5 02      LDA &02
     C17C   20 3E C1   JSR &C13E
     C17F   C0 01      CPY #&01
     C181   90 04      BCC &C187
     C183   8A         TXA
     C184   69 2B      ADC #&2B
     C186   AA         TAX
.lcd_move_curs
     C187   A9 14      LDA #&14
.lcd_curs_next_move
     C189   E0 00      CPX #&00
     C18B   F0 07      BEQ &C194
     C18D   20 3E C1   JSR &C13E
     C190   CA         DEX
     C191   4C 89 C1   JMP &C189
.lcd_set_curs_end
     C194   60         RTS
.ISR_handler
     C200   48         PHA
     C201   8A         TXA
     C202   48         PHA
     C203   2C 01 B0   BIT &B001
     C206   30 03      BMI &C20B
     C208   4C 2E C2   JMP &C22E
.acia_isr
     C20B   AE FF 04   LDX &04FF
     C20E   AD 00 B0   LDA &B000
     C211   9D 00 04   STA &0400,X
     C214   F0 09      BEQ &C21F
     C216   C9 0D      CMP #&0D
     C218   D0 0D      BNE &C227
     C21A   A9 00      LDA #&00
     C21C   9D 00 04   STA &0400,X
.acia_rx_set_null
     C21F   AD 10 02   LDA &0210
     C222   09 02      ORA #&02
     C224   8D 10 02   STA &0210
.acia_isr_end
     C227   E8         INX
     C228   8E FF 04   STX &04FF
     C22B   AD 01 B0   LDA &B001
.exit_isr
     C22E   68         PLA
     C22F   AA         TAX
     C230   68         PLA
     C231   40         RTI
.NMI_handler
.exit_nmi
     C300   40         RTI
.start_msg
     C400   5A 6F 6C ...
     C40B   00
.version_str
     C40C   52 4F 4D ...
     C413   00
.serial_prompt
     C414   0A
     C415   5A 3E 
     C417   00
     FFFA   00 C3
     FFFC   00 C0
     FFFE   00 C2
.endrom
Saving file 'bin/z64-ROM-05.bin'

.startrom
.startcode
     C000   D8         CLD
     C001   A2 FF      LDX #&FF
     C003   9A         TXS
     C004   A9 FF      LDA #&FF
     C006   8D 02 A0   STA &A002
     C009   A9 E0      LDA #&E0
     C00B   8D 03 A0   STA &A003
     C00E   A9 00      LDA #&00
     C010   8D 01 B0   STA &B001
     C013   8D 10 02   STA &0210
     C016   8D FF 04   STA &04FF
     C019   8D FF 03   STA &03FF
     C01C   A9 9E      LDA #&9E
     C01E   8D 03 B0   STA &B003
     C021   A9 09      LDA #&09
     C023   8D 02 B0   STA &B002
     C026   A9 38      LDA #&38
     C028   20 FB C0   JSR &C0FB
     C02B   A9 0C      LDA #&0C
     C02D   20 FB C0   JSR &C0FB
     C030   A9 01      LDA #&01
     C032   20 FB C0   JSR &C0FB
.main
     C035   20 5A C0   JSR &C05A
     C038   20 6C C0   JSR &C06C
     C03B   A2 00      LDX #&00
.pr_init_msg_ch
     C03D   BD 00 C4   LDA &C400,X
     C040   F0 08      BEQ &C04A
     C042   20 11 C1   JSR &C111
     C045   E8         INX
     C046   4C 3D C0   JMP &C03D
     C049   58         CLI
.mainloop
     C04A   AD 10 02   LDA &0210
     C04D   29 02      AND #&02
     C04F   D0 03      BNE &C054
     C051   4C 4A C0   JMP &C04A
.process_rx
     C054   20 7E C0   JSR &C07E
     C057   4C 4A C0   JMP &C04A
.serial_send_start_msg
     C05A   A2 00      LDX #&00
.send_start_char
     C05C   BD 04 C4   LDA &C404,X
     C05F   F0 0A      BEQ &C06B
     C061   20 C6 C0   JSR &C0C6
     C064   8D 00 B0   STA &B000
     C067   E8         INX
     C068   4C 5C C0   JMP &C05C
.serial_send_start_end
     C06B   60         RTS
.serial_send_prompt
     C06C   A2 00      LDX #&00
.send_prompt_char
     C06E   BD 18 C4   LDA &C418,X
     C071   F0 0A      BEQ &C07D
     C073   20 C6 C0   JSR &C0C6
     C076   8D 00 B0   STA &B000
     C079   E8         INX
     C07A   4C 6E C0   JMP &C06E
.serial_send_prompt_end
     C07D   60         RTS
.serial_print_rx_buf
     C07E   20 6C C0   JSR &C06C
     C081   AD 10 02   LDA &0210
     C084   29 F0      AND #&F0
     C086   8D 10 02   STA &0210
     C089   A2 00      LDX #&00
.get_rx_char
     C08B   BD 00 04   LDA &0400,X
     C08E   F0 0D      BEQ &C09D
     C090   20 11 C1   JSR &C111
     C093   E8         INX
     C094   EC FF 04   CPX &04FF
     C097   F0 04      BEQ &C09D
     C099   E0 FF      CPX #&FF
     C09B   D0 EE      BNE &C08B
.end_print_rx
     C09D   A2 00      LDX #&00
     C09F   8E FF 04   STX &04FF
     C0A2   8E 00 04   STX &0400
     C0A5   60         RTS
.serial_send_buffer
     C0A6   A2 00      LDX #&00
.serial_send_next_char
     C0A8   BD 00 03   LDA &0300,X
     C0AB   F0 13      BEQ &C0C0
     C0AD   20 C6 C0   JSR &C0C6
     C0B0   8D 00 B0   STA &B000
     C0B3   E8         INX
     C0B4   EC FF 03   CPX &03FF
     C0B7   F0 07      BEQ &C0C0
     C0B9   E0 FF      CPX #&FF
     C0BB   F0 03      BEQ &C0C0
     C0BD   4C A8 C0   JMP &C0A8
.serial_send_buf_end
     C0C0   A9 00      LDA #&00
     C0C2   8D FF 03   STA &03FF
     C0C5   60         RTS
.acia_wait_send_clr
     C0C6   48         PHA
.acia_wait_send_loop
     C0C7   AD 01 B0   LDA &B001
     C0CA   29 10      AND #&10
     C0CC   F0 F9      BEQ &C0C7
     C0CE   68         PLA
     C0CF   60         RTS
.acia_wait_byte_recvd
     C0D0   AD 01 B0   LDA &B001
     C0D3   29 08      AND #&08
     C0D5   F0 F9      BEQ &C0D0
     C0D7   60         RTS
.lcd_wait
     C0D8   48         PHA
     C0D9   A9 00      LDA #&00
     C0DB   8D 02 A0   STA &A002
.lcd_busy
     C0DE   A9 40      LDA #&40
     C0E0   8D 01 A0   STA &A001
     C0E3   A9 C0      LDA #&C0
     C0E5   8D 01 A0   STA &A001
     C0E8   AD 00 A0   LDA &A000
     C0EB   29 80      AND #&80
     C0ED   D0 EF      BNE &C0DE
     C0EF   A9 40      LDA #&40
     C0F1   8D 01 A0   STA &A001
     C0F4   A9 FF      LDA #&FF
     C0F6   8D 02 A0   STA &A002
     C0F9   68         PLA
     C0FA   60         RTS
.lcd_cmd
     C0FB   20 D8 C0   JSR &C0D8
     C0FE   8D 00 A0   STA &A000
     C101   A9 00      LDA #&00
     C103   8D 01 A0   STA &A001
     C106   A9 80      LDA #&80
     C108   8D 01 A0   STA &A001
     C10B   A9 00      LDA #&00
     C10D   8D 01 A0   STA &A001
     C110   60         RTS
.lcd_prt_chr
     C111   20 D8 C0   JSR &C0D8
     C114   8D 00 A0   STA &A000
     C117   A9 20      LDA #&20
     C119   8D 01 A0   STA &A001
     C11C   A9 A0      LDA #&A0
     C11E   8D 01 A0   STA &A001
     C121   A9 20      LDA #&20
     C123   8D 01 A0   STA &A001
     C126   60         RTS
.ISR_handler
     C200   48         PHA
     C201   8A         TXA
     C202   48         PHA
     C203   D8         CLD
     C204   2C 01 B0   BIT &B001
     C207   30 03      BMI &C20C
     C209   4C 36 C2   JMP &C236
.acia_isr
     C20C   AE FF 04   LDX &04FF
.acia_rx_get_char
     C20F   AD 00 B0   LDA &B000
     C212   9D 00 04   STA &0400,X
     C215   F0 09      BEQ &C220
     C217   C9 0D      CMP #&0D
     C219   D0 0D      BNE &C228
     C21B   A9 00      LDA #&00
     C21D   9D 00 04   STA &0400,X
.acia_rx_set_null
     C220   AD 10 02   LDA &0210
     C223   09 02      ORA #&02
     C225   8D 10 02   STA &0210
.acia_rx_set_info
     C228   E8         INX
     C229   AD 01 B0   LDA &B001
     C22C   29 08      AND #&08
     C22E   D0 DF      BNE &C20F
     C230   8E FF 04   STX &04FF
     C233   4C 36 C2   JMP &C236
.exit_isr
     C236   68         PLA
     C237   AA         TAX
     C238   68         PLA
     C239   40         RTI
.NMI_handler
.exit_nmi
     C300   40         RTI
.lcd_start_message
     C400   5A 36 34 
     C403   00
.serial_start_msg
     C404   0A
     C405   0A
     C406   5A 6F 6C ...
     C411   0A
     C412   52 65 61 ...
     C417   00
.serial_prompt
     C418   0A
     C419   5A 3E 
     C41B   00
     FFFA   00 C3
     FFFC   00 C0
     FFFE   00 C2
.endrom
Saving file 'z64-ROM-03-04.bin'
